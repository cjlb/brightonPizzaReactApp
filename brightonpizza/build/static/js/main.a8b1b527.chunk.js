(this.webpackJsonpbrightonpizza=this.webpackJsonpbrightonpizza||[]).push([[0],{35:function(e,s,t){},36:function(e,s,t){},54:function(e,s,t){},60:function(e,s,t){},61:function(e,s,t){},62:function(e,s,t){"use strict";t.r(s);var r=t(0),a=t(1),c=t.n(a),l=t(28),n=t.n(l),o=(t(35),t(9));t(36);var i=function(){return Object(r.jsx)("nav",{class:"navbar navbar-dark bg-primary",children:Object(r.jsx)("div",{className:"row col-12 d-flex justify-content-center text-white",children:Object(r.jsx)("span",{className:"h3",children:"Register"})})})},d=t(11),j=t(8),u=t(14),m=t.n(u),h=(t(54),"http://localhost:4000"),b=t(2);var p=Object(b.f)((function(e){var s=Object(a.useState)({email:"",password:"",successMessage:null}),t=Object(o.a)(s,2),c=t[0],l=t[1],n=function(e){var s=e.target,t=s.id,r=s.value;l((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},t,r))}))},i=function(){e.updateTitle("Home"),e.history.push("/home")};return Object(r.jsxs)("div",{className:"card col-12 col-lg-4 login-card mt-2 hv-center",children:[Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{className:"form-group text-left",children:[Object(r.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(r.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:c.email,onChange:n}),Object(r.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(r.jsxs)("div",{className:"form-group text-left",children:[Object(r.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(r.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:c.password,onChange:n})]}),Object(r.jsx)("div",{className:"form-check"}),Object(r.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(s){s.preventDefault();var t={email:c.email,password:c.password};m.a.post(h+"/login",t).then((function(s){200===s.data.code?(l((function(e){return Object(j.a)(Object(j.a)({},e),{},{successMessage:"Login successful. Redirecting to home page.."})})),i(),e.showError(null)):204===s.data.code?e.showError("Username and password do not match"):e.showError("Username does not exists")})).catch((function(e){console.log(e)}))},children:"Submit"})]}),Object(r.jsx)("div",{className:"alert alert-success mt-2",style:{display:c.successMessage?"block":"none"},role:"alert",children:c.successMessage}),Object(r.jsxs)("div",{className:"registerMessage",children:[Object(r.jsx)("span",{children:"Dont have an account? "}),Object(r.jsx)("span",{className:"loginText",onClick:function(){return e.history.push("/register"),void e.updateTitle("Register")},children:"Register"})]})]})}));t(60);var O=Object(b.f)((function(e){var s=Object(a.useState)({email:"",password:"",confirmPassword:"",successMessage:null}),t=Object(o.a)(s,2),c=t[0],l=t[1],n=function(e){var s=e.target,t=s.id,r=s.value;l((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},t,r))}))},i=function(){e.updateTitle("Home"),e.history.push("/home")};return Object(r.jsxs)("div",{className:"card col-12 col-lg-4 login-card mt-2 hv-center",children:[Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{className:"form-group text-left",children:[Object(r.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(r.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter email",value:c.email,onChange:n}),Object(r.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(r.jsxs)("div",{className:"form-group text-left",children:[Object(r.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(r.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:c.password,onChange:n})]}),Object(r.jsxs)("div",{className:"form-group text-left",children:[Object(r.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Confirm Password"}),Object(r.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",placeholder:"Confirm Password",value:c.confirmPassword,onChange:n})]}),Object(r.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(s){console.log("Button press"),s.preventDefault(),c.password===c.confirmPassword?function(){if(c.email.length&&c.password.length){e.showError(null);var s={email:c.email,password:c.password};console.log("Payload: "+JSON.stringify(s)),m.a.post(h+"/user/register",s).then((function(s){console.log(JSON.stringify(s)),console.log("Debug0"),200===s.response.data.code?(console.log("Debug1"),l((function(e){return Object(j.a)(Object(j.a)({},e),{},{successMessage:"Registration successful. Redirecting to home page.."})})),i(),e.showError(null)):(console.log("Debug2"),console.log(s),e.showError("Some error ocurred"))})).catch((function(s){s.response?e.showError(s.response.data.errors[0].msg):s.request?console.log(s.request):console.log("Error",s.message)}))}else console.log("Debug4"),e.showError("Please enter valid username and password")}():e.showError("Passwords do not match")},children:"Register"})]}),Object(r.jsx)("div",{className:"alert alert-success mt-2",style:{display:c.successMessage?"block":"none"},role:"alert",children:c.successMessage}),Object(r.jsxs)("div",{className:"mt-2",children:[Object(r.jsx)("span",{children:"Already have an account? "}),Object(r.jsx)("span",{className:"loginText",onClick:function(){return e.updateTitle("Login"),void e.history.push("/login")},children:"Login here"})]})]})}));var x=function(e){return Object(r.jsx)("div",{className:"mt-2",children:"Home page content"})},g=t(13);t(61);var f=function(e){var s=Object(a.useState)("none"),t=Object(o.a)(s,2),c=t[0],l=t[1],n=function(){l("none"),e.hideError(null)};return Object(a.useEffect)((function(){null!==e.errorMessage?l("block"):n()})),Object(r.jsx)("div",{className:"alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:c},children:Object(r.jsxs)("div",{className:"d-flex alertMessage",children:[Object(r.jsx)("span",{children:e.errorMessage}),Object(r.jsx)("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return n()},children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})})};var v=function(){var e=Object(a.useState)(null),s=Object(o.a)(e,2),t=s[0],c=s[1],l=Object(a.useState)(null),n=Object(o.a)(l,2),d=n[0],j=n[1];return Object(r.jsx)(g.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(i,{title:t}),Object(r.jsxs)("div",{className:"container d-flex align-items-center flex-column",children:[Object(r.jsxs)(b.c,{children:[Object(r.jsx)(b.a,{path:"/",exact:!0,children:Object(r.jsx)(O,{showError:j,updateTitle:c})}),Object(r.jsx)(b.a,{path:"/register",children:Object(r.jsx)(O,{showError:j,updateTitle:c})}),Object(r.jsx)(b.a,{path:"/login",children:Object(r.jsx)(p,{showError:j,updateTitle:c})}),Object(r.jsx)(b.a,{path:"/home",children:Object(r.jsx)(x,{})})]}),Object(r.jsx)(f,{errorMessage:d,hideError:j})]})]})})};n.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.a8b1b527.chunk.js.map